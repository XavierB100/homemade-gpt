{% extends "base.html" %}

{% block title %}Homemade GPT - Language Model Lab{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="text-center py-5">
            <h1 class="display-4 fw-bold mb-3">
                <i class="bi bi-brain feature-icon d-block"></i>
                Homemade GPT
            </h1>
            <p class="lead mb-4" style="color: var(--text-secondary);">
                Train custom neural networks on your text data and experiment with text generation
            </p>
            <div class="d-flex gap-3 justify-content-center flex-wrap">
                <a href="{{ url_for('train_page') }}" class="btn btn-gradient btn-lg">
                    <i class="bi bi-cpu"></i> Train Models
                </a>
                <a href="{{ url_for('chat_page') }}" class="btn btn-success-gradient btn-lg">
                    <i class="bi bi-terminal"></i> Text Generation
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-5">Platform Features</h2>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center">
            <div class="card-body">
                <i class="bi bi-file-earmark-text feature-icon d-block"></i>
                <h5 class="card-title" style="color: var(--text-primary);">Custom Data Training</h5>
                <p class="card-text" style="color: var(--text-secondary);">
                    Train on any text format - books, WhatsApp chats, documents. 
                    Automatic preprocessing and tokenization for character-level modeling.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center">
            <div class="card-body">
                <i class="bi bi-diagram-3 feature-icon d-block"></i>
                <h5 class="card-title" style="color: var(--text-primary);">Transformer Architecture</h5>
                <p class="card-text" style="color: var(--text-secondary);">
                    Modern GPT implementation with multi-head attention, 
                    configurable model sizes from <code>0.8M</code> to <code>150M</code> parameters.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 text-center">
            <div class="card-body">
                <i class="bi bi-activity feature-icon d-block"></i>
                <h5 class="card-title" style="color: var(--text-primary);">Real-Time Monitoring</h5>
                <p class="card-text" style="color: var(--text-secondary);">
                    Live training progress with loss tracking, learning rate scheduling, 
                    and model performance analytics.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Technical Specs -->
<div class="row mb-5">
    <div class="col-md-3 mb-3">
        <div class="card text-center" style="background: var(--bg-tertiary); border: 1px solid var(--purple-primary);">
            <div class="card-body py-3">
                <div class="mb-2">
                    <i class="bi bi-code-square" style="font-size: 2rem; color: var(--purple-primary);"></i>
                </div>
                <h6 style="color: var(--purple-primary); font-weight: 600; font-size: 1rem;">PyTorch</h6>
                <p style="color: var(--text-primary); margin: 0; font-size: 0.9rem;">Framework</p>
                <small style="color: var(--text-muted);">Neural networks</small>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-center" style="background: var(--bg-tertiary); border: 1px solid var(--cyan-primary);">
            <div class="card-body py-3">
                <div class="mb-2">
                    <i class="bi bi-cpu" style="font-size: 2rem; color: var(--cyan-primary);"></i>
                </div>
                <h6 style="color: var(--cyan-primary); font-weight: 600; font-size: 1rem;">GPU/CPU</h6>
                <p style="color: var(--text-primary); margin: 0; font-size: 0.9rem;">Training</p>
                <small style="color: var(--text-muted);">Adaptive compute</small>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-center" style="background: var(--bg-tertiary); border: 1px solid var(--green-primary);">
            <div class="card-body py-3">
                <div class="mb-2">
                    <i class="bi bi-type" style="font-size: 2rem; color: var(--green-primary);"></i>
                </div>
                <h6 style="color: var(--green-primary); font-weight: 600; font-size: 1rem;">Character-Level</h6>
                <p style="color: var(--text-primary); margin: 0; font-size: 0.9rem;">Modeling</p>
                <small style="color: var(--text-muted);">Token-free approach</small>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card text-center" style="background: var(--bg-tertiary); border: 1px solid var(--purple-light);">
            <div class="card-body py-3">
                <div class="mb-2">
                    <i class="bi bi-graph-up" style="font-size: 2rem; color: var(--purple-light);"></i>
                </div>
                <h6 style="color: var(--purple-light); font-weight: 600; font-size: 1rem;">Monitoring</h6>
                <p style="color: var(--text-primary); margin: 0; font-size: 0.9rem;">Real-time</p>
                <small style="color: var(--text-muted);">Live training metrics</small>
            </div>
        </div>
    </div>
</div>

<!-- Available Models Section -->
{% if models %}
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">Trained Models</h2>
    </div>
    
    {% for model in models[:6] %}
    <div class="col-lg-4 col-md-6 mb-4">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <h6 class="card-title mb-0" style="color: var(--text-primary);">{{ model.name }}</h6>
                    <span class="badge" style="background: var(--purple-primary); color: white;">{{ model.params }}</span>
                </div>
                <p class="small mb-2" style="color: var(--text-secondary);">
                    <i class="bi bi-calendar"></i> {{ model.modified }}
                </p>
                <p class="small mb-3" style="color: var(--text-secondary);">
                    <i class="bi bi-database"></i> Vocab: {{ model.vocab_size }}
                    <span class="ms-2">
                        <i class="bi bi-file-earmark"></i> {{ "%.1f"|format(model.size / 1024 / 1024) }} MB
                    </span>
                </p>
                <div class="d-flex gap-2">
                    <a href="{{ url_for('chat_page') }}?model={{ model.file }}" 
                       class="btn btn-gradient btn-sm flex-fill">
                        <i class="bi bi-chat"></i> Chat
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    
    {% if models|length > 6 %}
    <div class="col-12 text-center">
        <a href="{{ url_for('models_page') }}" class="btn btn-outline-primary">
            View All Models ({{ models|length }})
        </a>
    </div>
    {% endif %}
</div>
{% else %}
<div class="row mb-5">
    <div class="col-12">
        <div class="card text-center">
            <div class="card-body py-5">
                <i class="bi bi-cpu feature-icon d-block"></i>
                <h4>No Models Trained Yet</h4>
                <p style="color: var(--text-muted);" class="mb-4">
                    Train your first neural network on custom text data to get started.
                </p>
                <a href="{{ url_for('train_page') }}" class="btn btn-gradient btn-lg">
                    <i class="bi bi-play-fill"></i> Begin Training
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- Process Overview -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-5">Training Process</h2>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="text-center">
            <div class="rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                 style="width: 60px; height: 60px; font-size: 1.2rem; font-weight: bold; background: var(--gradient-purple); color: white;">
                1
            </div>
            <h5>Data Processing</h5>
            <p style="color: var(--text-secondary);">
                Upload text data and configure preprocessing. Character-level tokenization 
                with automatic vocabulary building and train/validation splitting.
            </p>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="text-center">
            <div class="rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                 style="width: 60px; height: 60px; font-size: 1.2rem; font-weight: bold; background: var(--gradient-success); color: white;">
                2
            </div>
            <h5>Neural Training</h5>
            <p style="color: var(--text-secondary);">
                Configure transformer architecture and hyperparameters. 
                Monitor training loss, learning rate scheduling, and model convergence.
            </p>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="text-center">
            <div class="rounded-circle d-inline-flex align-items-center justify-content-center mb-3" 
                 style="width: 60px; height: 60px; font-size: 1.2rem; font-weight: bold; background: var(--gradient-warning); color: white;">
                3
            </div>
            <h5>Text Generation</h5>
            <p style="color: var(--text-secondary);">
                Generate text using trained models with configurable sampling parameters. 
                Experiment with temperature, top-k, and response length controls.
            </p>
        </div>
    </div>
</div>

<!-- Technical Info -->
<div class="row">
    <div class="col-12">
        <div class="card text-center" style="background: var(--bg-tertiary); border: 1px solid var(--purple-primary);">
            <div class="card-body py-4">
                <h4 style="color: var(--text-primary);">Experimental Neural Network Platform</h4>
                <p style="color: var(--text-secondary);" class="mb-4">
                    Built with PyTorch for educational and research purposes. 
                    Train custom language models and experiment with transformer architectures.
                </p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{{ url_for('train_page') }}" class="btn btn-gradient">
                        <i class="bi bi-cpu"></i> Start Training
                    </a>
                    <a href="{{ url_for('models_page') }}" class="btn btn-success-gradient">
                        <i class="bi bi-database"></i> View Models
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
